# Bouncing Balls

## Tools

### Grumbler

Gumbler boilerplate used (A template for writing distributable javascript libraries.): <https://medium.com/@bluepnume/introducing-grumbler-an-opinionated-javascript-module-template-612245e06d00>


#### Building

```bash
npm run build
```

#### Tests

-   Edit tests in `./test/tests`
-   Run the tests:

    ```bash
    npm run test
    ```

#### Testing with different/multiple browsers

```bash
npm run karma -- --browser=PhantomJS
npm run karma -- --browser=Chrome
npm run karma -- --browser=Safari
npm run karma -- --browser=Firefox
npm run karma -- --browser=PhantomJS,Chrome,Safari,Firefox
```

#### Keeping the browser open after tests

```bash
npm run karma -- --browser=Chrome --keep-open
```


## Usage

### Existing canvas

Create an instance of bouncing balls with an existing canvas element. See [demo/index.html]() code https://github.com/git/git/blob/master/demo/index.html#L5-L12
```html
<body>
  <script src="../dist/bouncingballs.js"></script>
  <canvas id="bb-canvas" width="600px" height="400px" style="border: 1px solid black"></canvas>
</body>
```
```javascript
	var bb = new BouncingBalls({ canvas: document.getElementById('bb-canvas') })
```

This will use the bassed canvas element as the BouncingBall play ground. By default balls are created on click (see [Bouncing Balls constructor parameter](#bouncingBalls)).

### Without specified canvas but in a container

Create an instance of bouncing balls with an existing canvas element. See [demo/index.html]() code https://github.com/git/git/blob/master/demo/index.html#L15-L20
```html
<body>
  <script src="../dist/bouncingballs.js"></script>
  <div id="div-container">
    <h1>Existing Canvas</h1>
    <div id="bb-container" style="width:600px;height:400px;border: 1px solid blue"></div>
  </div>
</body>
```
```javascript
      var bb2 = new BouncingBalls({ container: document.getElementById('bb-container') });
```

## Demos

[Declared canvas or within container](http://htmlpreview.github.com/?https://github.com/glebedel/boucning/balls/blob/master/demo/index.html)

[Covers the document body](http://htmlpreview.github.com/?https://github.com/glebedel/boucning/balls/blob/master/demo/fullscreen.html)


# API Doc

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [BouncingBalls](#bouncingballs)
    -   [drawBall](#drawball)
    -   [isDrawing](#isdrawing)
    -   [stop](#stop)
    -   [start](#start)
    -   [moveBall](#moveball)
    -   [addBall](#addball)
    -   [draw](#draw)
    -   [ballMouseHandler](#ballmousehandler)
-   [Ball](#ball)
    -   [getNextPos](#getnextpos)
    -   [setPos](#setpos)
    -   [aggregateForces](#aggregateforces)
    -   [decayForces](#decayforces)
    -   [moveNext](#movenext)

## BouncingBalls

**Parameters**

-   `$0` **any** 
    -   `$0.canvas`   (optional, default `document.createElement("canvas")`)
    -   `$0.container`   (optional, default `window.document.body`)
-   `settings` **{gravity: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), speed: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), click: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean), collisionRatio: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), drawInterval: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)}**  (optional, default `{gravity:1,speed:5,bounceDecayRatio:0.965,gravityDecayRatio:1.02,click:true,collisionRatio:0.98,drawInterval:20}`)

### drawBall

Draw ball on BouncingBalls' canvas

**Parameters**

-   `ball` **[Ball](#ball)** ball to draw

### isDrawing

Whether or not drawing loop is running

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true if drawing loop is running / false otherwise

### stop

Stop the drawing loop

### start

start the drawing loop

Returns **TimeoutID** timeout id of the drawing loop

### moveBall

move a ball on the canvas to its next coordinates

**Parameters**

-   `ball` **[Ball](#ball)** to move on canvas

Returns **Coordinates** new coordinates where the ball has been moved to

### addBall

add a ball on the canvas

**Parameters**

-   `args` **...any** 
-   `null` **any** {@see Ball}

Returns **[Ball](#ball)** ball created

### draw

draw all the BouncingBalls' balls on its canvas
If parameter is true then it launches the drawing loop

**Parameters**

-   `triggered` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** whether or not function is being manually triggered or triggered via timeout loop (optional, default `false`)

### ballMouseHandler

Ball creation mouse handler (creating the ball based on x/y position of mouse event)

Returns **[Ball](#ball)** ball created/added to canvas

## Ball

### getNextPos

Get the next coordinates of the ball based on current position and forces

Returns **Coordinates** x/y coordinates

### setPos

reset the ball position

**Parameters**

-   `position` **Coordinates** new coordinates where the ball must be set to

### aggregateForces

Sum up all x/y translations based on x/y components of each force

Returns **Coordinates** x/y object reflecting summed up translations

### decayForces

apply the decay ratio of each force to their x/y components

### moveNext

Move the ball to the next coordinates.
Also apply the decay ratio to each force (see [Ball~decayForces](Ball~decayForces)) after setting new coordinates

**Parameters**

-   `nextPos` **Coordinates** coordinates to move the ball to. Uses [Ball~setPos](Ball~setPos) (optional, default `this.getNextPos()`)

Returns **Coordinates** the new coordinates where the ball has been moved to
